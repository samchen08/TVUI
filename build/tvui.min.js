/*! TVUI version : 1.2.0  2015-08-07 17:08:23 */
var TVUI=function(){return{version:"1.2.0",uuid:0,debug:!0}}();"undefined"!=typeof define&&define(function(require,exports,module){module.exports=TVUI}),this.JSON||(this.JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var Zepto=function(a){function b(a){return null===a?String(a):U[V.call(a)]||"object"}function c(a){return"function"===b(a)}function d(a){return a&&null!==a&&a===a.window}function e(a){return a&&a.nodeType===a.DOCUMENT_NODE}function f(a){return"object"===b(a)}function g(a){return a&&f(a)&&!d(a)&&Object.getPrototypeOf(a)===Object.prototype}function h(a){return a&&"number"==typeof a.length}function i(a){return D.call(a,function(a){return null!==a})}function j(a){return a.length>0?y.fn.concat.apply([],a):a}function k(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function m(a,b){return"number"!=typeof b||H[k(a)]?b:b+"px"}function n(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function o(a){return"children"in a?C.slice.call(a.children):y.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function p(a,b){var c,d=a?a.length:0;for(c=0;d>c;c++)this[c]=a[c];this.length=d,this.selector=b||""}function q(b,c,d){for(x in c)d&&(g(c[x])||Z(c[x]))?(g(c[x])&&!g(b[x])&&(b[x]={}),Z(c[x])&&!Z(b[x])&&(b[x]=[]),q(b[x],c[x],d)):c[x]!==a&&(b[x]=c[x])}function r(a,b){return null===b?y(a):y(a).filter(b)}function s(a,b,d,e){return c(b)?b.call(a,d,e):b}function t(a,b,c){null===c?a.removeAttribute(b):a.setAttribute(b,c)}function u(b,c){var d=b.className||"",e=d&&d.baseVal!==a;return c===a?e?d.baseVal:d:void(e?d.baseVal=c:b.className=c)}function v(a){try{return a?"true"==a||("false"==a?!1:"null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?y.parseJSON(a):a):a}catch(b){return a}}function w(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)w(a.childNodes[c],b)}var x,y,z,A,B,C=[],D=C.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return A=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},B=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},W.fragment=function(b,c,d){var e,f,h;return J.test(b)&&(e=y(E.createElement(RegExp.$1))),e||(b.replace&&(b=b.replace(K,"<$1></$2>")),c===a&&(c=I.test(b)&&RegExp.$1),c in R||(c="*"),h=R[c],h.innerHTML=""+b,e=y.each(C.slice.call(h.childNodes),function(){h.removeChild(this)})),g(d)&&(f=y(e),y.each(d,function(a,b){N.indexOf(a)>-1?f[a](b):f.attr(a,b)})),e},W.Z=function(a,b){return new p(a,b)},W.isZ=function(a){return a instanceof W.Z},W.init=function(b,d){var e;if(!b)return W.Z();if("string"==typeof b)if(b=b.trim(),"<"==b[0]&&I.test(b))e=W.fragment(b,RegExp.$1,d),b=null;else{if(d!==a)return y(d).find(b);e=W.qsa(E,b)}else{if(c(b))return y(E).ready(b);if(W.isZ(b))return b;if(Z(b))e=i(b);else if(f(b))e=[b],b=null;else if(I.test(b))e=W.fragment(b.trim(),RegExp.$1,d),b=null;else{if(d!==a)return y(d).find(b);e=W.qsa(E,b)}}return W.Z(e,b)},y=function(a,b){return W.init(a,b)},y.extend=function(a){var b,c=C.slice.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){q(a,c,b)}),a},W.qsa=function(a,b){var c,d="#"==b[0],e=!d&&"."==b[0],f=d||e?b.slice(1):b,g=T.test(f);return a.getElementById&&g&&d?(c=a.getElementById(f))?[c]:[]:1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType?[]:C.slice.call(g&&!d&&a.getElementsByClassName?e?a.getElementsByClassName(f):a.getElementsByTagName(b):a.querySelectorAll(b))},y.contains=E.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},y.type=b,y.isFunction=c,y.isWindow=d,y.isArray=Z,y.isPlainObject=g,y.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},y.inArray=function(a,b,c){return C.indexOf.call(b,a,c)},y.camelCase=A,y.trim=function(a){return"string"==typeof a?String.prototype.trim.call(a):""},y.uuid=0,y.support={},y.expr={},y.noop=function(){},y.map=function(a,b){var c,d,e,f=[];if(h(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!==c&&f.push(c);else for(e in a)c=b(a[e],e),null!==c&&f.push(c);return j(f)},y.each=function(a,b){var c,d;if(h(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},y.grep=function(a,b){return D.call(a,b)},window.JSON&&(y.parseJSON=JSON.parse),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),y.fn={constructor:W.Z,length:0,forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,splice:C.splice,indexOf:C.indexOf,concat:function(){var a,b,c=[];for(a=0;a<arguments.length;a++)b=arguments[a],c[a]=W.isZ(b)?b.toArray():b;return C.concat.apply(W.isZ(this)?this.toArray():this,c)},map:function(a){return y(y.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return y(C.slice.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(y):E.addEventListener("DOMContentLoaded",function(){a(y)},!1),this},get:function(b){return b===a?C.slice.call(this):this[b>=0?b:b+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!==this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return C.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return c(a)?this.not(this.not(a)):y(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return y(B(this.concat(y(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(b){var d=[];if(c(b)&&b.call!==a)this.each(function(a){b.call(this,a)||d.push(this)});else{var e="string"==typeof b?this.filter(b):h(b)&&c(b.item)?C.slice.call(b):y(b);this.forEach(function(a){e.indexOf(a)<0&&d.push(a)})}return y(d)},has:function(a){return this.filter(function(){return f(a)?y.contains(this,a):y(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!f(a)?a:y(a)},last:function(){var a=this[this.length-1];return a&&!f(a)?a:y(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?y(a).filter(function(){var a=this;return C.some.call(c,function(b){return y.contains(b,a)})}):1==this.length?y(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)}):y()},closest:function(a,b){var c=this[0],d=!1;for("object"==typeof a&&(d=y(a));c&&!(d?d.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!e(c)&&c.parentNode;return y(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=y.map(c,function(a){return(a=a.parentNode)&&!e(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return r(b,a)},parent:function(a){return r(B(this.pluck("parentNode")),a)},children:function(a){return r(this.map(function(){return o(this)}),a)},contents:function(){return this.map(function(){return this.contentDocument||C.slice.call(this.childNodes)})},siblings:function(a){return r(this.map(function(a,b){return D.call(o(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return y.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=n(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var b=c(a);if(this[0]&&!b)var d=y(a).get(0),e=d.parentNode||this.length>1;return this.each(function(c){y(this).wrapAll(b?a.call(this,c):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){y(this[0]).before(a=y(a));for(var b;(b=a.children()).length;)a=b.first();y(a).append(this)}return this},wrapInner:function(a){var b=c(a);return this.each(function(c){var d=y(this),e=d.contents(),f=b?a.call(this,c):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){y(this).replaceWith(y(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(b){return this.each(function(){var c=y(this);(b===a?"none"==c.css("display"):b)?c.show():c.hide()})},prev:function(a){return y(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return y(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(){this.innerHTML=a}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=s(this,a,b,this.textContent);this.textContent=null===c?"":""+c}):0 in this?this[0].textContent:null},attr:function(b,c){var d;return"string"!=typeof b||1 in arguments?this.each(function(a){if(1===this.nodeType)if(f(b))for(x in b)t(this,x,b[x]);else t(this,b,s(this,c,a,this.getAttribute(b)))}):this.length&&1===this[0].nodeType?!(d=this[0].getAttribute(b))&&b in this[0]?this[0][b]:d:a},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){t(this,a)},this)})},prop:function(a,b){return a=Y[a]||a,1 in arguments?this.each(function(c){this[a]=s(this,b,c,this[a])}):this[0]&&this[0][a]},data:function(b,c){var d="data-"+b.replace(M,"-$1").toLowerCase(),e=1 in arguments?this.attr(d,c):this.attr(d);return null!==e?v(e):a},val:function(a){return 0 in arguments?this.each(function(b){this.value=s(this,a,b,this.value)}):this[0]&&(this[0].multiple?y(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var c=y(this),d=s(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;if(!y.contains(E.documentElement,this[0]))return{top:0,left:0};var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(a,c){if(arguments.length<2){var d,e=this[0];if(!e)return;if(d=getComputedStyle(e,""),"string"==typeof a)return e.style[A(a)]||d.getPropertyValue(a);if(Z(a)){var f={};return y.each(a,function(a,b){f[b]=e.style[A(b)]||d.getPropertyValue(b)}),f}}var g="";if("string"==b(a))c||0===c?g=k(a)+":"+m(a,c):this.each(function(){this.style.removeProperty(k(a))});else for(x in a)a[x]||0===a[x]?g+=k(x)+":"+m(x,a[x])+";":this.each(function(){this.style.removeProperty(k(x))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(y(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?C.some.call(this,function(a){return this.test(u(a))},l(a)):!1},addClass:function(a){return a?this.each(function(b){if("className"in this){z=[];var c=u(this),d=s(this,a,b,c);d.split(/\s+/g).forEach(function(a){y(this).hasClass(a)||z.push(a)},this),z.length&&u(this,c+(c?" ":"")+z.join(" "))}}):this},removeClass:function(b){return this.each(function(c){if("className"in this){if(b===a)return u(this,"");z=u(this),s(this,b,c,z).split(/\s+/g).forEach(function(a){z=z.replace(l(a)," ")}),u(this,z.trim())}})},toggleClass:function(b,c){return b?this.each(function(d){var e=y(this),f=s(this,b,d,u(this));f.split(/\s+/g).forEach(function(b){(c===a?!e.hasClass(b):c)?e.addClass(b):e.removeClass(b)})}):this},scrollTop:function(b){if(this.length){var c="scrollTop"in this[0];return b===a?c?this[0].scrollTop:this[0].pageYOffset:this.each(c?function(){this.scrollTop=b}:function(){this.scrollTo(this.scrollX,b)})}},scrollLeft:function(b){if(this.length){var c="scrollLeft"in this[0];return b===a?c?this[0].scrollLeft:this[0].pageXOffset:this.each(c?function(){this.scrollLeft=b}:function(){this.scrollTo(b,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(y(a).css("margin-top"))||0,c.left-=parseFloat(y(a).css("margin-left"))||0,d.top+=parseFloat(y(b[0]).css("border-top-width"))||0,d.left+=parseFloat(y(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==y(a).css("position");)a=a.offsetParent;return a})}},y.fn.detach=y.fn.remove,["width","height"].forEach(function(b){var c=b.replace(/./,function(a){return a[0].toUpperCase()});y.fn[b]=function(f){var g,h=this[0];if(f===a){if(d(h))return h["inner"+c];if(e(h))return h.documentElement["scroll"+c];if(h.style&&"none"==h.style.display){var i=y(h).clone().insertAfter(y(h)).show(),j=i.offset()[b];return i.remove(),j}return g=this.offset(),g[b]}return this.each(function(a){h=y(this),h.css(b,s(this,f,a,h[b]()))})}}),O.forEach(function(a,c){var d=c%2;y.fn[a]=function(){var a,e,f=y.map(arguments,function(c){return a=b(c),"object"==a||"array"==a||null===c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0===c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var h=y.contains(E.documentElement,e);f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return y(a).remove();e.insertBefore(a,b),h&&w(a,function(a){null===a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},y.fn[d?a+"To":"insert"+(c?"Before":"After")]=function(b){return y(b)[a](this),this}}),W.Z.prototype=p.prototype=y.fn,W.uniq=B,W.deserializeValue=v,y.zepto=W,y}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),window.TVUI&&(window.TVUI.$=Zepto),function(TVUI){function empty(){}function xmlHttp(){return new window.XMLHttpRequest}function mimeToDataType(a){return a&&(a=a.split(";",2)[0]),a&&(a==htmlType?"html":a==jsonType?"json":scriptTypeRE.test(a)?"script":xmlTypeRE.test(a)&&"xml")||"text"}function appendQuery(a,b){return""===b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function ajax(options){var settings=$.extend({type:"GET",url:"",data:null,success:empty,error:empty,complete:empty,timeout:0,cache:!0,dataType:"text",headers:null,async:!0},options||{}),abortTimeout,dataType=settings.dataType,mime=accepts[dataType],headers={},setHeader=function(a,b){headers[a.toLowerCase()]=[a,b]},xhr=xmlHttp(),protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,nativeSetHeader=xhr.setRequestHeader;if((mime=settings.mimeType||mime)&&(mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime)),(settings.contentType||settings.contentType!==!1&&settings.data&&"GET"!=settings.type.toUpperCase())&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded"),settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);"object"==typeof settings.data&&(settings.data=util.param(settings.data)),settings.data&&"GET"==settings.type.toUpperCase()&&(settings.url=appendQuery(settings.url,settings.data)),settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+(new Date).getTime())),xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(4==xhr.readyState){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0===xhr.status&&"file:"==protocol){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{"script"==dataType?eval(result+""):"xml"==dataType?result=xhr.responseXML:"json"==dataType&&(result=blankRE.test(result)?null:JSON.parse(result))}catch(err){error=err}error?settings.error(error,"parsererror",xhr,settings):settings.success(result,xhr,settings),settings.complete(xhr.status,xhr,settings)}else settings.error(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings),settings.complete(xhr.status,xhr,settings)}},settings.timeout>0&&(abortTimeout=setTimeout(function(){alert("timeout"),xhr.onreadystatechange=empty,xhr.abort(),settings.error(null,"timeout",xhr,settings)},settings.timeout)),xhr.open(settings.type,settings.url,settings.async,"","");for(name in headers)nativeSetHeader.apply(xhr,headers[name]);try{xhr.send(settings.data?settings.data:null)}catch(err){}return xhr}function parseArguments(a,b,c,d){return $.isFunction(b)&&(d=c,c=b,b=void 0),$.isFunction(c)||(d=c,c=void 0),{url:a,data:b,success:c,dataType:d}}var util=TVUI.Util,$=TVUI.$,name,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,accepts={script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"};$.extend(TVUI.$,{ajax:ajax,get:function(){return ajax(parseArguments.apply(null,arguments))},post:function(){var a=parseArguments.apply(null,arguments);return a.type="POST",ajax(a)},getJSON:function(){var a=parseArguments.apply(null,arguments);return a.dataType="json",ajax(a)},getScript:function(){var a=parseArguments.apply(null,arguments);return a.dataType="script",a.cache=!1,ajax(a)}})}(TVUI),function(a,b){var c={};b(c),a.View=c}(TVUI,function(a){function b(a,b){return t.call(a,b)}function c(a){return!b(p,a)}function d(a){return"function"==typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})}function g(a){if(!v(a)||2!==a.length)throw new Error("Invalid tags: "+a);return[new RegExp(e(a[0])+"\\s*"),new RegExp("\\s*"+e(a[1]))]}function h(b,d){function f(){if(A&&!B)for(;z.length;)delete y[z.pop()];else z=[];A=!1,B=!1}d=d||a.tags,b=b||"","string"==typeof d&&(d=d.split(o));for(var h,l,m,p,t,u,v=g(d),w=new k(b),x=[],y=[],z=[],A=!1,B=!1;!w.eos();){if(h=w.pos,m=w.scanUntil(v[0]))for(var C=0,D=m.length;D>C;++C)p=m.charAt(C),c(p)?z.push(y.length):B=!0,y.push(["text",p,h,h+1]),h+=1,"\n"===p&&f();if(!w.scan(v[0]))break;if(A=!0,l=w.scan(s)||"name",w.scan(n),"="===l?(m=w.scanUntil(q),w.scan(q),w.scanUntil(v[1])):"{"===l?(m=w.scanUntil(new RegExp("\\s*"+e("}"+d[1]))),w.scan(r),w.scanUntil(v[1]),l="&"):m=w.scanUntil(v[1]),!w.scan(v[1]))throw new Error("Unclosed tag at "+w.pos);if(t=[l,m,h,w.pos],y.push(t),"#"===l||"^"===l)x.push(t);else if("/"===l){if(u=x.pop(),!u)throw new Error('Unopened section "'+m+'" at '+h);if(u[1]!==m)throw new Error('Unclosed section "'+u[1]+'" at '+h)}else"name"===l||"{"===l||"&"===l?B=!0:"="===l&&(v=g(d=m.split(o)))}if(u=x.pop())throw new Error('Unclosed section "'+u[1]+'" at '+w.pos);return j(i(y))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,u=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===u.call(a)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;null!=b&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this.cache[a]=b}return d(b)&&(b=b.call(this.view)),b},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(b,c,e,f){function g(a){return k.render(a,c,e)}for(var h,i,j="",k=this,l=0,m=b.length;m>l;++l)switch(h=b[l],h[0]){case"#":if(i=c.lookup(h[1]),!i)continue;if(v(i))for(var n=0,o=i.length;o>n;++n)j+=this.renderTokens(h[4],c.push(i[n]),e,f);else if("object"==typeof i||"string"==typeof i)j+=this.renderTokens(h[4],c.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,f.slice(h[3],h[5]),g),null!=i&&(j+=i)}else j+=this.renderTokens(h[4],c,e,f);break;case"^":i=c.lookup(h[1]),(!i||v(i)&&0===i.length)&&(j+=this.renderTokens(h[4],c,e,f));break;case">":if(!e)continue;i=d(e)?e(h[1]):e[h[1]],null!=i&&(j+=this.renderTokens(this.parse(i),c,e,i));break;case"&":i=c.lookup(h[1]),null!=i&&(j+=i);break;case"name":i=c.lookup(h[1]),null!=i&&(j+=a.escape(i));break;case"text":j+=h[1]}return j},a.name="mustache.js",a.version="0.8.1",a.tags=["{{","}}"];var x=new m;a.clearCache=function(){return x.clearCache()},a.parse=function(a,b){return x.parse(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g},a.escape=f,a.Scanner=k,a.Context=l,a.Writer=m}),function($,TVUI){var emptyArray=[],slice=emptyArray.slice,Util={slice:slice,encode:encodeURIComponent,decode:decodeURIComponent,proxy:function(a,b){var c=slice.call(arguments,2);return function(){var d=slice.call(arguments),e=d.concat(c);return a.apply(b,e)}},likeArray:function(a){if("undefined"==typeof a)return!1;var b=a.length,c=$.type(a);return $.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&"object"===c&&b>0&&b-1 in a)},makeArray:function(a){return Array.prototype.slice.call(a)},queryToJson:function(a,b,c){var d={};a=a.replace(/^[^\?]*\?/,""),b=b||"&",c=c||"=";for(var e,f=this,g=new RegExp("(?:^|\\"+b+")([^\\"+c+"\\"+b+"]+)(?:\\"+c+"([^\\"+b+"]*))?","g");null!==(e=g.exec(a));)e[1]!==a&&(d[f.decode(e[1])]=f.decode(e[2]||""));return d},getParam:function(a,b){return b?this.queryToJson(b)[a]:(this.__queryCache||(this.__queryCache=this.queryToJson(location.search)),this.__queryCache[a])},param:function(a,b,c){var d,e=[],f=this;b=b||"&",c=c||"=";for(d in a)a.hasOwnProperty(d)&&null!==a[d]&&e.push(f.encode(d)+(""===a[d]?"":c+f.encode(a[d])));return e.join(b)},getFileName:function(a){var b=a||location.pathname,c=b.lastIndexOf("/")+1,d=b.lastIndexOf(".");return b.substring(c,d)},log:function(a,b,c,d,e){if("undefined"!=typeof console&&console.log)try{console.log.apply(console,slice.call(arguments))}catch(f){switch(arguments.length){case 0:console.log();break;case 1:console.log(a);break;case 2:console.log(a,b);break;case 3:console.log(a,b,c);break;case 4:console.log(a,b,c,d);break;case 5:console.log(a,b,c,d,e)}}},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)}).toUpperCase()},pad:function(a,b){for(var c=a.toString().length;b>c;)a="0"+a,c++;return a},range:function(a,b,c){var d,e,f=a.length,g=parseInt((b-1)/2),h=[],i=g,j=b-i-1;for(d=e=c,h.push(a[c]);i>0;)d--,d=0>d?f-1:d,h.unshift(a[d]),i--;for(;j>0;)e++,e=e>f-1?0:e,h.push(a[e]),j--;return h},rangeLeft:function(a,b,c){var d=a.length,e=[],f=a.length>=b?b-1:a.length-1,g=c;for(e.push(a[c]);f>0;)g++,g=g>d-1?0:g,e.push(a[g]),f--;return e},rangeFixed:function(a,b,c){var d=(b-1)/2|0;d=0>c-d?0:c-d;var e=d+b-1,f=a.length,g=[];if(f>b)for(;d>f-b;)d>0&&d--,e--;else d=0,e=f-1;for(var h=d;e>=h;h++)g.push(a[h]);return g},timeout:function(a,b,c){return setTimeout(this.proxy(a,c),b)},date:function(dateStr,format,options){if(!dateStr)return new Date;var obj=null;if(/Date/.test(dateStr)){var d=dateStr.replace(/\//g,"");obj=eval("(new "+d+")")}else obj="string"==typeof dateStr?new Date(dateStr.replace(/-/g,"/")):dateStr;var setting={y:0,M:0,d:0,h:0,m:0,s:0};$.extend(setting,options||{}),obj=new Date(setting.y+obj.getFullYear(),setting.M+obj.getMonth(),setting.d+obj.getDate(),setting.h+obj.getHours(),setting.m+obj.getMinutes(),setting.s+obj.getSeconds());var o={"M+":obj.getMonth()+1,"d+":obj.getDate(),"h+":obj.getHours(),"m+":obj.getMinutes(),"s+":obj.getSeconds(),"q+":Math.floor((obj.getMonth()+3)/3),S:obj.getMilliseconds()};if(format){/(y+)/.test(format)&&(format=format.replace(RegExp.$1,4==RegExp.$1.length?obj.getFullYear():(obj.getFullYear()+"").substr(4-RegExp.$1.length)));for(var k in o)new RegExp("("+k+")").test(format)&&(format=format.replace(RegExp.$1,1==RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return format}return obj},tpl:function(a,b){if(a){a=a.replace(/%7B/gi,"{").replace(/%7D/gi,"}");var c=/\{\$(\w+)\}/g,d=[],e=function(b){return a.replace(c,function(a,c){return c in b?b[c]:a})};if($.isArray(b))for(var f=0,g=b.length;g>f;f++){var h=b[f];h._index=f,d.push(e(h))}else d.push(e(b));return d.join("")}},getCharCount:function(a){return a?a.replace(/[^\x00-\xff]/g,"xx").length:-1},subStr:function(a,b){for(var c=0,d="",e=/[^\x00-\xff]/g,f="",g=a.replace(e,"**").length,h=0;g>h&&(f=a.charAt(h).toString(),null!==f.match(e)?c+=2:c++,!(c>b));h++)d+=f;return g>b&&(d+=".."),d},getSTBType:function(){var a=navigator.userAgent;return/RocME/gi.test(a)||/MMCP_EW/gi.test(a)?"gdSTB":/Firefox/gi.test(a)||/Chrome/gi.test(a)?"browser":/AppleWebKit/gi.test(a)?"scSTB":""}};TVUI.Util=Util}(Zepto,TVUI),TVUI.Key={NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,EXIT:27,CHANNEL_DOWN:91,CHANNEL_UP:93,RED:320,YELLOW:322,BLUE:323,GREEN:321,EPG:69,INFO:73,MENU:72,VOLUME_MUTE:67,SELECT:13,VOLUME_DOWN:45,VOLUME_UP:61,DOWN:83,UP:87,LEFT:65,RIGHT:68,POWER:19,PAGE_UP:306,PAGE_DOWN:307,TRACK:86,LIKE:76,BACK:8,PROGRAM_LIST:641,TV_RADIO:642,NVOD:315,MAIL:77,STAR:318,POUND:319,INVALID:90513,STATE:514,DC:515,SORT:516,GAME:517,LAST_CHANNEL:314,PAUSE:59,HOMEPAGE:72,MOSAIC:532,STOCK:533,VIDEO:313,AUDIO:535,PLAY:39,STOP:47,FUN1:518,FUN2:519,FUN3:769,FUN4:770,FUN5:771,FUN6:772,FUN7:773,FUN9:44,FUN10:46,FUN12:59,FUN13:82,FUN14:780,FUN15:781,FUN16:782,FUN17:783,FUN18:784,FUN19:785,FUN20:319,DVB_SEARCH_FINISH:10001,DVB_SEARCH_FAILED:10002,DVB_SEARCH_START:10003,DVB_SEARCH_SERVICE_READY:10004,DVB_SEARCH_STOP:10005,DVB_TUNE_SUCCESS:10031,DVB_TUNE_FAILED:10032,DVB_NIT_CHANGED:10041,DVB_NIT_NETWORK_DESCRIPTOR_READY:10042,DVB_NIT_TS_DESCRIPTOR_READY:10043,DVB_NIT_TABLE_READY:10044,DVB_BAT_BOUQUET_DESCRIPTOR_READY:10081,DVB_BAT_TS_DESCRIPTOR_READY:10082,DVB_SDT_SERVICE_DESCRIPTOR_READY:10091,DATA_DEL_ALL_SUCC:10101,DATA_DEL_ALL_FAILED:10102,DATA_DEL_TMP_SUCC:10103,DATA_DEL_TMP_FAILED:10104,DATA_UPDATE_SUCC:10105,DATA_UPDATE_FAILED:10106,DATA_REVERT_SUCC:10107,DATA_REVERT_FAILED:10108,DATA_SAVE_SUCC:10109,DATA_SAVE_FAILED:10110,DATA_BACKUP_SUCC:10111,DATA_BACKUP_FAILED:10112,DATA_RESTORE_SUCC:10113,DATA_RESTORE_FAILED:10114,EPG_SEARCH_SUCC:10201,EPG_SEARCH_STOP_WHEN_RST_TO_MAX:10202,EPG_SEARCH_TIMEOUT:10203,EPG_ACTUAL_PF_READY:10204,EPG_OTHER_PF_READY:10205,EPG_ACTUAL_SCHEDULE_READY:10206,EPG_OTHER_SCHEDULE_READY:10207,DVB_EIT_EVENT_DESCRIPTOR_READY:10208,NVOD_REFEVENT_READY:10221,NVOD_REFEVENT_TIMEOUT:10222,NVOD_TISHIEVENT_READY:10223,NVOD_TISHIEVENT_TIMEOUT:10224,NVOD_TISHIEVENT_END:10225,CA_SMARTCARD_INSERT:10401,CA_SMARTCARD_EVULSION:10402,CA_MSG_INFO:10403,CA_MSG_ALARM:10404,CA_MSG_COMMAND:10405,CA_MSG_STATUS:10406,NETWORK_CONNECTED:10501,NETWORK_DISCONNECTED:10502,LAN_NETWORK_CONNECTED:10503,
LAN_NETWORK_DISCONNECTED:10504,LAN_NETWORK_DHCP_ENABLE_SUCCESS:10508,LAN_NETWORK_DHCP_ENABLE_TIMEOUT:10509,NTPTIME_SYNC_SUCC:10521,NTPTIME_SYNC_TIMEOUT:10522,PING_RESPONSE:10523,IP_UPDATED:10524,WRITE_FLASH_SUCC:10601,OTA_FORCE_UPGRADE:10701,OTA_MANUAL_UPGRADE:10702,OTA_ANALY_UPGRADE_DATA:10703,OTA_ANALY_NIT_SUCCESS:10704,OTA_ANALY_NIT_FAILED:10705,OTA_ANALY_PAT_SUCCESS:10706,OTA_ANALY_PAT_FAILED:10707,OTA_ANALY_PMT_SUCCESS:10708,OTA_ANALY_PMT_FAILED:10709,OTA_BURNING:10710,OTA_BURNING_SUCCESS:10711,OTA_BURNING_FAILED:10712,OTA_UPDATE_SUCCESS:10713,OTA_NO_UPDGRADE_INFO:10714,ORDERD_EVENT_WILL_START:10801,ORDERD_EVENT_START:10802,VOD_END_OF_STREAM:10901,VOD_BEGIN_OF_STREAM:10902,VOD_S1_ANNOUNCE_TERMINATE:10903,VOD_C1_ANNOUNCE_TERMINATE:10904,VOD_EXCEPTION:11e3,CAEXT_INQUIRE_IPP:11701,CAEXT_HIDDEN_PROGRAM:11702,VOD_EXTINIT_OVER:20004,EMAIL:11536,SEARCH_DEL_TEMP_FAILED:80001,SEARCH_FAILED:80002,SEARCH_STOP:80012,SEARCH_SAVE_FAILED:80006,SEARCH_SAVE_SUCC:80007,SEARCH_TUNE_FAILED:80008,SEARCH_TUNE_SUCC:80009,SEARCH_READY:80010},window.DataAccess||(TVUI.Key.DOWN=40,TVUI.Key.UP=38,TVUI.Key.LEFT=37,TVUI.Key.RIGHT=39,TVUI.Key.BACK=32,TVUI.Key.PAGE_UP=33,TVUI.Key.PAGE_DOWN=34),TVUI.Lang={zh:{T_1:"确定",T_2:"取消",T_3:"关闭",T_4:"退出",T_5:"播放",T_6:"续播",T_7:"锁频失败",T_8:"无法在当前频点找到节目描述信息,请联系客服96956.",T_9:"不可用媒资",T_10:"网络繁忙，请稍候!",T_11:"无权限操作",T_12:"推流会话中断,请联系客服电话96956,错误码:C1-10909-",T_13:"点播失败,是否重新点播?",T_14:"点播会话中断,请联系客服电话96956,错误码:S1-10904-",T_15:"提示"},en:{T_1:"OK",T_2:"Cancel",T_3:"Close",T_4:"Exit",T_5:"Play",T_6:"Resume",T_7:"Locking frequency failed",T_8:"Program information in not found , pls call 96956.",T_9:"Not available media resources!",T_10:"The network is busy, pls wait!",T_11:"No permission to operate.",T_12:"Flow session is interrupted,pls call 96956, error code:C1-10909-",T_13:"On demand failed, whether to replay or not?",T_14:"On demand session is interrupted,pls call 96956,error code:S1-10904-",T_15:"Prompt"}},TVUI.Lang.extend=function(a){Zepto.extend(TVUI.Lang,a||{})},function(a,b,c){var d,e=500,f=200,g=2e3,h=c.document,i={},j=b.Key,k={load:c,unload:c,beforeunload:c,keyup:h,keydown:h,keypress:h},l=function(a,c,d){return i[++b.uuid]={type:a,handler:c,scope:d},(k[a]||h).addEventListener(a,c,!1),b.uuid},m=function(a,b){var c,d;if(a)if(b){h.removeEventListener(a,b,!1);for(c in i)if(d=i[c],d.type==a&&d.handler==b){delete i[c];break}}else for(c in i)d=i[c],d.type==a&&(h.removeEventListener(d.type,d.handler,!1),delete i[d]);else{for(c in i)d=i[c],h.removeEventListener(d.type,d.handler,!1);i={}}},n=function(a){var b=i[a]||{};h.removeEventListener(b.type,b.handler,!1),delete i[a]},o=function(a){return a&&a.preventDefault?a.preventDefault():c.event.returnValue=!1,!1},p=function(a){var b={preventDefault:function(){},keyCode:a,which:a};return b},q=function(a){var b=a||c.event;return b.type=b.type||null,b.which=b.keyCode=b.which||b.keyCode||null,b.modifiers=b.modifiers||null,b};d={preventDefault:o,on:function(a,b,c){return l(a,function(a){b&&b.call(c||b,q(a))})},off:function(b,c){var d=a.type(b);if("number"===d)n(b);else if("array"===d)for(var e=0,f=b.length;f>e;e++)arguments.callee(b[e]);else m.apply(m,arguments)},fire:function(a,b){for(var c in i){var d=i[c];d.type==a&&d.handler.call(d.scope,p(b))}},onPress:function(a,b){return this.on("keyup",a,b)},onKey:function(a,b,c){var d,g,h,i,j,k=null,l=null;return i=this.on("keydown",function(g){g.which==a&&(d=(new Date).getTime(),k||(k=setTimeout(function(){l=setInterval(function(){b&&b.call(c,g)},f)},e)))},c),j=this.on("keyup",function(f){clearTimeout(k),clearInterval(l),k=l=null,g=(new Date).getTime(),h=g-d,e>h&&f.which==a&&b&&b.call(c,f)},c),[i,j]},onKeys:function(b,c,d){var e=this,f=[];return a.each(b,function(a,b){f=f.concat(e.onKey(b,c,d))}),f},onOk:function(a,b){return this.onKey(j.SELECT,a,b)},onLeft:function(a,b){return this.onKey(j.LEFT,a,b)},onRight:function(a,b){return this.onKey(j.RIGHT,a,b)},onUp:function(a,b){return this.onKey(j.UP,a,b)},onDown:function(a,b){return this.onKey(j.DOWN,a,b)},onMove:function(a,b){var c=[j.UP,j.RIGHT,j.DOWN,j.LEFT];return this.onKeys(c,function(c){switch(c.which){case j.UP:c.direction="up",a&&a.call(b,c.direction,c);break;case j.RIGHT:c.direction="right",a&&a.call(b,c.direction,c);break;case j.DOWN:c.direction="down",a&&a.call(b,c.direction,c);break;case j.LEFT:c.direction="left",a&&a.call(b,c.direction,c)}},b)},onNumber:function(a,b){return this.on("keyup",function(c){c.which>=j.NUM0&&c.which<=j.NUM9&&(c.number=parseInt(c.which-j.NUM0,10),a&&a.call(b,c))},b)},onComKey:function(a,b,c){var d={};return d.timerId=null,d.keyTime=null,d._lastKeys=[],this.on("keyup",function(e){clearTimeout(d.timerId);var f=(new Date).getTime();(!d.keyTime||f-d.keyTime<g)&&(d._lastKeys.push(e.which),d.keyTime=f),a.join(",")==d._lastKeys.join(",")&&(e.comKeys=a,d._lastKeys=[],d.keyTime=null,b&&b.call(c,e)),d.timerId=setTimeout(function(){d._lastKeys=[],d.keyTime=null},g)},c)},onComNumber:function(a,b,c){var d,e,f={},h=[];return f.timerId=null,f.keyTime=null,f._lastKeys=[],d=this.onNumber(function(d){clearTimeout(f.timerId);var e=(new Date).getTime();(!f.keyTime||e-f.keyTime<g)&&(f._lastKeys.push(d.number),f.keyTime=e,a&&a.call(c,f._lastKeys.join(""),d)),f.timerId=setTimeout(function(){b&&b.call(c,f._lastKeys.join(""),d),f._lastKeys=[],f.keyTime=null},g)},c),e=this.onOk(function(a){f._lastKeys.length>0&&(clearTimeout(f.timerId),b&&b.call(c,f._lastKeys.join(""),a),f._lastKeys=[],f.keyTime=null)},c),h.concat(d).concat(e)},onSystem:function(a,b){return this.on("systemevent",function(c){a&&a.call(b,c)},b)}},b.Event=d}(Zepto,TVUI,window),function(a,b){function c(b){function c(){this._init.apply(this,arguments),this.init.apply(this,arguments)}if(c.prototype._init=function(){},c.prototype.init=function(){},b){var e=function(){};a.extend(!0,e.prototype,b.prototype),c.prototype=new e,c.prototype.parent=b}return c.include=function(b){var d=b.included;return delete b.included,a.extend(c.prototype,b,!0),d&&d(c),this},c.extend=function(b){var d=b.extended;return delete b.extended,a.extend(!0,c,b),d&&d(c),this},c.proxy=function(a,b){return d.proxy(a,this,b)},c.proxyAll=function(){for(var a=d.slice.call(arguments),b=0,c=a.length;c>b;b++)this[a[b]]=this.proxy(this[a[b]])},c.prototype.proxy=c.proxy,c.prototype.proxyAll=c.proxyAll,c}var d=b.Util;c.create=function(a,b){return c(b).include(a||{})},b.Class=c}(Zepto,TVUI),function(a,b){var c=b.Util,d=b.Class,e=b.Event,f={on:function(a,b){for(var c=a.split(" "),d=(this._callbacks||(this._callbacks={}),0);d<c.length;d++)(this._callbacks[c[d]]||(this._callbacks[c[d]]=[])).push(b);return this},fire:function(){var a,b,d,e,f=c.makeArray(arguments),g=f.shift();if(!(b=this._callbacks))return!1;if(!(a=this._callbacks[g]))return!1;for(d=0,e=a.length;e>d&&a[d].apply(this,f)!==!1;d++);return!0},off:function(a,b){if(!a)return this._callbacks={},this;var c,d,e,f;if(!(d=this._callbacks))return this;if(!(c=this._callbacks[a]))return this;if(!b)return delete this._callbacks[a],this;for(e=0,f=c.length;f>e;e++)if(b===c[e]){c.splice(e,1);break}return this}},g=d.create({_init:function(){this.id=++b.uuid,this.__eventIdArray=[],this._active=!0},registerEvent:function(a){this.__eventIdArray=this.__eventIdArray.concat(a)},destroy:function(){this.fire("destroy",this),e.off(this.__eventIdArray),this.off()},active:function(a){this._active=!0,this.fire("active",this,a)},unActive:function(){this._active=!1,this.fire("unActive",this)}});g.include(f),g.extend(f),b.Base=g}(Zepto,TVUI),function(a,b){var c=a.Util,d=a.Key,e=a.$,f=function(){},g=function(){c.log(arguments)},h=!!window.DataAccess&&!!window.SysSetting,i={info:function(a,b,d){return h?d?(DataAccess.setInfo(a,b,d),void this.save(a,b)):DataAccess.getInfo(a,b):(c.log("msg:","DataAccess undefined. do: da.info"),"")},save:function(a,b){"undefined"==typeof DataAccess?c.log("msg:","DataAccess undefined. do:da.save"):DataAccess.save(a,b)},revert:function(a,b){"undefined"==typeof DataAccess?c.log("msg:","DataAccess undefined do:da.revert"):DataAccess.revert(a,b)},volume:function(a){return"number"!=e.type(a)&&"string"!=e.type(a)?parseInt(this.info("MediaSetting","OutputVolumn"),10):(a=a>32?32:a,a=0>a?0:a,this.info("MediaSetting","OutputVolumn",a),this.info("VodApp","QAMName4",a),void 0)},volumn:function(a){return this.volume(a)}},j={env:function(a,b){if("undefined"!=typeof SysSetting)if(b)SysSetting.setEnv(a,String(b));else{if(null!==b)return SysSetting.getEnv(a);SysSetting.deleteEnv(a)}else if(b)sessionStorage&&sessionStorage.setItem(a,b);else{if(null!==b)return window.sessionStorage?sessionStorage.getItem(a):"";sessionStorage&&sessionStorage.removeItem(a)}},envJSON:function(a,c){if(c){if("object"!=typeof c)throw Error("evnJSON param require JSON");this.env(a,b.stringify(c))}else{if(null!==c){var d=this.env(a);return d?b.parse(d):null}this.env(a,null)}},sendEvent:function(a,b,c){return"undefined"!=typeof SysSetting?SysSetting.sendEvent(a,b,c):void 0},getEventInfo:function(a){return"undefined"!=typeof SysSetting?SysSetting.getEventInfo(a):""},clear:function(){"undefined"!=typeof SysSetting?SysSetting.deleteallEnv():sessionStorage&&sessionStorage.clear()}},k=function(){var a=window.CA||{};return{name:a.name||"",icNo:a.icNo||"",pinLocked:a.pinLocked||!0,version:a.version||"",regionCode:a.regionCode||0,changePin:a.changePin||g,setRating:a.setRating||g,getRating:a.getRating||g,setWorkTime:a.setWorkTime||g,getWorkTime:a.getWorkTime||g,getOperators:a.getOperators||g,getWallets:a.getWallets||g,getEntitles:a.getEntitles||g,getMails:a.getMails||g,getViewedIPPs:a.getViewedIPPs||g,getInquireIPP:a.getInquireIPP||g,cancelInquireIPP:a.cancelInquireIPP||g}}(),l=function(){var a=window.Network||{};return{ethernets:a.ethernets||{},getDeviceState:a.getDeviceState||g,isEnable:function(){if(h){var b=a.getDeviceState("eth0"),c=a.getDeviceState("cm");return b>300||c>300?!0:101==b||201==c}return!0}}}(),m={download:function(c){if(!h)return void(c.error&&c.error());var d={path:"",timeout:5,dataType:"text",success:f,error:f};e.extend(d,c);var g,i;a.Event.on("systemevent",function(a){var c;switch(parseInt(a.which)){case 10151:clearTimeout(i);var e=FileSystem.getRemoteFile(g);if(1==e.open(1)){if(c=e.readAllfile(),"json"==d.dataType)try{c=b.parse(c)}catch(f){d.error(f)}e.close(),d.success(c,e),FileSystem.killObject(e)}else d.error("文件打开失败");break;case 10152:clearTimeout(i),c="前端不存在要下载的文件",d.error(c);break;case 10153:clearTimeout(i),c="文件下载失败",d.error(c);break;case 10154:clearTimeout(i),c="下载超时",d.error(c)}}),g=FileSystem.downloadRemoteFile(d.path,d.timeout),d.timeout>0&&(i=setTimeout(function(){d.error("下载超时")},1e3*d.timeout))},getFile:function(a,b,c){if(!h)return void(c&&c("不支持"));var d=FileSystem.getFile(a);if(-1==d)c&&c("文件不存在");else if(0===d)c&&c("获取文件失败");else if(1==d.open(1)){var e=d.readAllfile();d.close(),b&&b(e,d),FileSystem.killObject(d)}else c&&c("文件打开失败");return d},createFile:function(a,b){if(h){var c=FileSystem.createFile();if(0!==c&&1==c.open(1)){c.writeFile(a),c.close();var d=c.saveAs(b);return FileSystem.killObject(c),d}return 0}},removeDir:function(b,c){if(h){var d=b.split("/");""===d[d.length-1]&&d.pop(),b=d.join("/"),a.Event.on("systemevent",function(a){10160==parseInt(a.which)&&1==parseInt(a.modifiers)&&c&&c()}),1==FileSystem.existDirectory(b)&&FileSystem.deleteDirectory(b)}}},n={getChannelByServiceId:function(a){return h?user.channels.getChannelByServiceId(a):null},getDVBServiceByServiceId:function(a){var b=this.getChannelByServiceId(a);return b?b.getService():null},isSupportPlayback:function(a){var b=this.getDVBServiceByServiceId(a);return b?!!b.supportPlayback:!1}},o={},p=[],q=!1,r={search:function(a){p.push(a),q||(q=!0,this.searchProgramsByServiceId(p.shift()))},searchProgramsByServiceId:function(b){if(h){var c={serviceId:"",mask:1,timeout:10,startDate:0,days:1,complete:g};e.extend(c,b);var f,j,k=null,l=arguments.callee,m=[c.serviceId,c.mask,c.startDate,c.days].join("_"),n=o[m],r=function(a){c.complete(a),p.length>0?l(p.shift()):q=!1};n?r(n):(a.Event.onSystem(function(a){if(a.modifiers==f)switch(parseInt(a.which)){case d.EPG_SEARCH_SUCC:case d.EPG_SEARCH_STOP_WHEN_RST_TO_MAX:case d.EPG_SEARCH_TIMEOUT:clearTimeout(k),j=EPG.getSearchResult(f),o[m]=j,r(j)}}),i.info("DVBSetting","EPGStartDate",String(c.startDate)),i.info("DVBSetting","EPGNumdays",String(c.days)),f=EPG.searchProgramsByServiceId(c.serviceId,c.mask,c.timeout),k=setTimeout(function(){r([])},1e3*(c.timeout+1)))}}};a.API={DataAccess:i,SysSetting:j,CA:k,Network:l,FileSystem:m,user:n,EPG:r}}(TVUI,JSON),function(a,b){var c=a.API.SysSetting,d=a.Event,e=a.Key,f=a.Util,g=a.Class.create({init:function(a){var d=this.options=b.extend({lang:"zh",name:"page_"+this.id,url:location.href,history:!0,preventDefault:!0,home:!1,level:0,backUrl:null,unload:function(a,b){return!0}},a||{});this.name=d.name,this.cacheKey=g.cacheKey+this.name,this.cache={},this.params=f.queryToJson(d.url)||{},this.lang=this.params.lang||c.env(g.langKey)||d.lang,this.url=d.url,this.panels={},this.activePanel=null,this.level=d.level,d.preventDefault&&(document.onkeyup=document.onkeydown=document.onkeypress=function(){return!1}),d.backUrl&&c.env(g.backUrlKey,d.backUrl),document.referrer||g.clearHistory(),this.addHistory(),this.loadCache(),this.events()},addHistory:function(){var a=this.options;a.history&&g.addHistory({name:this.name,url:this.url,home:a.home,level:this.level})},go:function(a,b){if(a){if(b){var c=f.param(b);a+=a.indexOf("?")>-1?"&"+c:"?"+c}this.fire("unload",this,a),this.isUnload=!0,this.fire("go",a),location.href=a}},back:function(){var a=g.backHistory();if(a)this.fire("back",a.url),this.go(a.url);else{var b=c.env(g.backUrlKey);b?(c.env(g.backUrlKey,null),this.fire("back",g.backUrlKey),this.go(b)):this.fire("defaultBack")}},exit:function(){var a=g.homeHistory();a?(this.fire("exit",a.url),this.go(a.url)):this.back()},refresh:function(){this.fire("unload",this,this.url),this.isUnload=!0,this.fire("refresh"),location.reload()},loadCache:function(){var a=this.cacheKey,d=c.envJSON(a);b.extend(this.cache,d||{}),c.envJSON(a,null)},setCache:function(a){b.extend(this.cache,a||{})},getCache:function(){return this.cache},clearCache:function(){this.cache={}},saveCache:function(){var a=this.cacheKey;b.isEmptyObject(this.cache)?c.envJSON(a,null):c.envJSON(a,this.cache)},setLang:function(a){this.lang=a||"zh",c.env(g.langKey,this.lang),this.fire("setLang",a)},addPanel:function(){for(var a=arguments,b=this,c=0,d=a.length;d>c;c++)!function(a){a&&a.id&&!b.panels[a.id]&&(a.on("active",function(c){for(var d in b.panels)b.panels.hasOwnProperty(d)&&a.id!=d&&b.panels[d].unActive();b.activePanel=c}),b.panels[a.id]=a)}(a[c])},events:function(){var b=this.options;this.registerEvent(d.onPress(function(c){if(this._active)switch(c.which){case e.BLUE:a.debug&&this.refresh();break;case e.EXIT:b.unload(this,"exit")&&this.exit();break;case e.BACK:b.unload(this,"back")&&this.back()}},this)),this.registerEvent(d.onComKey([e.NUM9,e.NUM6,e.NUM9,e.NUM5,e.NUM6],function(){this._active&&this.go("ui://factory/index.html")},this)),this.registerEvent(d.onComKey([e.NUM1,e.NUM1,e.NUM1,e.NUM1,e.NUM1],function(){a.debug&&(c.clear(),alert("成功清空缓存"),this.refresh())},this)),a.Event.on("unload",function(){this.isUnload||(this.fire("unload"),this.isUnload=!0)},this),this.on("unload",this.saveCache,this),this.on("active",function(){this.activePanel&&(this.activePanel._active=!0,this.activePanel.pager&&(this.activePanel.pager._active=!0))}),this.on("unActive",function(){for(var a in this.panels)if(this.panels.hasOwnProperty(a)){var b=this.panels[a];!this.activePanel&&b._active&&(this.activePanel=b),b._active=!1,b.pager&&(b.pager._active=!1)}})}},a.Base);g.extend({historyCacheKey:"sw_history",cacheKey:"sw_cache_",langKey:"sw_lang",backUrlKey:"backUrl",history:[],addHistory:function(a){var d,e=c.envJSON(this.historyCacheKey)||[],f=e.length;f>0?(d=e[f-1],d.url!=a.url&&(e=b.grep(e,function(b){return b.name==a.name&&b.url==a.url?!1:0===b.level||b.level>0&&b.level<a.level}),e.push(a),e.sort(function(a,b){return a.level-b.level}))):e.push(a),this.history=e,c.envJSON(this.historyCacheKey,e)},clearHistory:function(){this.history=[],c.envJSON(this.historyCacheKey,null)},backHistory:function(){var a=this.history;return a.length>1?(a.pop(),c.envJSON(this.historyCacheKey,a),a[a.length-1]):null},homeHistory:function(){var a,d=this.history.slice(0);if(d.pop(),a=b.grep(d,function(a){return a.home}),a.length>0)for(var e,f=d.length-1;f>=0;){if(e=d.pop(),e.home)return c.envJSON(this.historyCacheKey,d),e;--f}return null}}),a.Page=g}(TVUI,Zepto),function(a){var b,c=a.$,d=a.Class,e=a.Event,f=a.Util,g=a.Base;b=d.create({init:function(a){var b=this.options=c.extend({active:!0,cols:0,data:[],disabled:[],focusIndex:0,focusClass:"focus",selectClass:"select",leaveClass:"leave",loop:!1,pager:null,textSelector:null,textChar:-1,textAttrName:"data-text"},a||{});this._active=b.active,this.data=b.data,this.disabled=b.disabled,this.focusIndex=b.focusIndex,this.cols=b.cols,this.rows=Math.ceil(this.data.length/this.cols),this.loop=b.loop,this.pager=b.pager,this.setEmptyCell(),this.events(),this.pager&&(this.pager._active=this._active),setTimeout(this.proxy(function(){this._active&&this.focus(this.focusIndex)}),0)},reset:function(a,b,c){this.data=a,this.cols=c||this.cols,this.focusIndex=b||0,this.rows=Math.ceil(this.data.length/this.cols),this.disabled=[],this.setEmptyCell(),this.fire("reset",a,b,c)},setEmptyCell:function(){for(var a=this.rows*this.cols,b=this.data.length;a>b;b++)this.disable(b)},indexToCell:function(a){var b=parseInt(a/this.cols),c=a%this.cols;return[b,c]},cellToIndex:function(a){return a[0]*this.cols+a[1]},disable:function(a){this.disabled.push(a),setTimeout(this.proxy(function(){this.fire("disable",a,this)}),0)},enable:function(a){this.disabled=c.grep(this.disabled,function(b){return b!=a}),this.fire("enable",a,this)},validate:function(a){for(var b=this.disabled,c=!1,d=this.cellToIndex(a),e=0,f=b.length;f>e;e++)if(b[e]==d){c=!0;break}return c},delayLeave:function(a,b){setTimeout(this.proxy(function(){this.fire("leave",a,b,this._active,this)}),20)},leave:function(a,b){var c={left:"Left",right:"Right",up:"Up",down:"Down"},d=this.indexToCell(b);this.fire("leave",a,d,this._active,this),this.fire("leave"+c[a],d,b,this._active,this)},_nextRight:function(a){var b=a[0],c=a[1]+1;if(c>this.cols-1){if(this.delayLeave("right",a),!this.loop)return a;c=0}return this.validate([b,c])?this._nextRight([b,c]):[b,c]},_nextLeft:function(a){var b=a[0],c=a[1]-1;if(0>c){if(this.delayLeave("left",a),!this.loop)return a;c=this.cols-1}return this.validate([b,c])?this._nextLeft([b,c]):[b,c]},_nextUp:function(a){var b=a[0]-1,c=a[1];if(0>b){if(this.delayLeave("up",a),!this.loop)return a;b=this.rows-1}return this.validate([b,c])?this._nextUp([b,c]):[b,c]},_nextDown:function(a){var b=a[0]+1,c=a[1];if(b>this.rows-1){if(this.delayLeave("down",a),!this.loop)return a;b=0}return this.validate([b,c])?this._nextDown([b,c]):[b,c]},next:function(a,b){if(!this.validate(a)){var c,d,e;switch(b){case"left":c=this._nextLeft(a);break;case"down":c=this._nextDown(a);break;case"right":c=this._nextRight(a);break;case"up":c=this._nextUp(a)}e=this.cellToIndex(c),this.focusIndex==e||this.validate(c)||(d=this.cellToIndex(a),this.blur(d,b),this.focus(e,b))}},select:function(a){var b=this.data,c=b[a];c&&this.fire("select",a,c,this)},focus:function(a){var b=this.data,c=b[a];this.focusIndex=a,c&&this.fire("focus",a,c,this)},autoFocus:function(a){switch(this.blur(),a){case 0:this.focus(this.options.focusIndex);break;case 1:this.focus(0);break;case 2:this.focus(this.data.length-1);break;default:this.focus(this.focusIndex)}},blur:function(){var a=this.data,b=this.focusIndex,c=a[b];c&&(this.blurIndex=b,this.fire("blur",this.blurIndex,c,this))},events:function(){if(this.registerEvent(e.onMove(function(a){if(this._active){var b=this.indexToCell(this.focusIndex);this.next(b,a)}},this)),this.registerEvent(e.onOk(function(){this._active&&this.select(this.focusIndex)},this)),this.on("focus",function(a,b){b&&b.nodeType&&(c(b).addClass(this.options.focusClass),this.marquee(b))}),this.on("blur",function(a,b){b&&b.nodeType&&(c(b).removeClass(this.options.focusClass),this.unMarquee(b))}),this.on("select",function(a,b){b&&b.nodeType&&c(b).addClass(this.options.selectClass)}),this.on("leave",function(a,b){this.blurIndex=this.leaveIndex=this.cellToIndex(b)}),this.on("active",function(a,b){var d=this.data[this.leaveIndex];d&&d.nodeType&&c(d).removeClass(this.options.leaveClass),this.blur(),b=void 0===b?this.focusIndex:b,this.focus(b),this.leaveIndex=null,this.pager&&this.pager.active()}),this.on("unActive",function(){var a=this.data[this.leaveIndex];a&&a.nodeType&&c(a).addClass(this.options.leaveClass),this.blur(),this.pager&&this.pager.unActive()}),this.pager){var a=this;if(this.pager.on("change",function(){var b=this;setTimeout(function(){b.itemIndex=b.pageSize*b.pageIndex+a.focusIndex},20)}),this.pager.on("reset",function(){var b=this;setTimeout(function(){b.itemIndex=b.pageSize*b.pageIndex+a.focusIndex},20)}),this.pager.async);else{var b=this.pager;this.on("focus",function(a){var c=Math.floor(a/b.pageSize);b.pageIndex!=c&&b.change(c)}),this.pager.on("next prev",function(b){a.blur(),a.focus(b*this.pageSize)})}}},marquee:function(a){var b=this.options,d=b.textSelector,e=b.textAttrName,g=b.textChar;if(g>-1){var h=d?c(a).find(d):c(a),i=h.attr(e);f.getCharCount(i)>g&&h.html("<marquee>"+i+"</marquee>")}},unMarquee:function(a){var b=this.options,d=b.textSelector,e=b.textAttrName,g=b.textChar;if(g>-1){var h=d?c(a).find(d):c(a),i=h.attr(e);f.getCharCount(i)>g&&h.html(f.subStr(i,g))}}},g),a.Panel=b}(TVUI),function(a){var b,c=a.$,d=a.Class,e=a.Event,f=a.Key,g=a.Base;b=d.create({init:function(a){var b=this.options=c.extend({total:1,pageSize:10,pageIndex:0,type:0,async:!1},a||{});this.total=b.total,this.pageSize=b.pageSize,this.pageCount=Math.ceil(this.total/this.pageSize),this.pageIndex=b.pageIndex,this.type=b.type,this.async=b.async,this.itemIndex=this.pageSize*this.pageIndex,this.events(),this.change(this.pageIndex,0)},events:function(){this.registerEvent(e.onMove(function(a){this._active&&(1===this.type&&"up"==a||2===this.type&&"left"==a?(this.itemIndex=this.itemIndex>0?--this.itemIndex:0,this.move(this.itemIndex,2)):(1===this.type&&"down"==a||2===this.type&&"right"==a)&&(this.itemIndex=this.itemIndex<this.total-1?++this.itemIndex:this.total-1,this.move(this.itemIndex,1)))},this)),this.registerEvent(e.onPress(function(a){if(this._active)switch(a.which){case f.PAGE_DOWN:this.next();break;case f.PAGE_UP:this.prev()}},this))},move:function(a,b){var c=Math.floor(this.itemIndex/this.pageSize);c!=this.pageIndex&&this.change(c,b),this.itemIndex=a,this.fire("move",this.itemIndex,this)},reset:function(a,b,c){this.total=a,this.pageSize=b||this.pageSize,this.pageCount=Math.ceil(this.total/this.pageSize),this.pageIndex=c||this.pageIndex,this.itemIndex=this.pageSize*this.pageIndex,this.fire("reset",a,b,c)},change:function(a,b){a>=0&&a<this.pageCount&&(this.pageIndex=a),setTimeout(this.proxy(this.delayChange,b),20)},delayChange:function(a){this.fire("change",this.pageIndex,a,this)},next:function(){this.pageIndex<this.pageCount-1&&(this.change(++this.pageIndex,1),this.fire("next",this.pageIndex,this))},prev:function(){this.pageIndex>0&&(this.change(--this.pageIndex,2),this.fire("prev",this.pageIndex,this))},first:function(){this.change(0,2)},last:function(){this.change(this.pageCount-1,1)}},g),a.Pager=b}(TVUI),function(a){var b,c=a.$,d=a.Key,e=a.Class,f=a.Base,g=a.Event;b=e.create({init:function(a){var b=this.options=c.extend({view:null,content:null,track:null,handle:"span",panel:null,scrollLength:100,handleHeight:null},a||{});this.panel=b.panel,this.$view=c(b.view),this.$content=c(b.content),this.$track=c(b.track),this.$handle=c(b.handle),this.currentStep=0,this.reset(),this.events()},reset:function(a){this.viewHeight=this.$view.height(),this.panel&&this.panel.pager&&this.panel.pager.async===!0?this.contentHeight=a||this.panel.pager.pageCount*this.viewHeight:this.contentHeight=a||this.$content.height(),this.scrollHeight=this.contentHeight-this.viewHeight,this.scrollHeight>0?this.show():this.hide(),this.trackHeight=this.trackHeight||this.$track.height(),this.handleHeight=this.getHandleHeight(this.contentHeight),this.$handle.height(this.handleHeight),this.scrollSteps=this.getScrollSteps(),this.perContent=this.scrollHeight/this.scrollSteps,this.scrollTrackHeight=this.trackHeight-this.handleHeight,this.perScroller=this.scrollTrackHeight/this.scrollSteps,this.pageCount=Math.ceil(this.contentHeight/this.viewHeight)},getHandleHeight:function(a){return this.options.handleHeight||Math.max(this.trackHeight*(this.viewHeight/a),10)},getScrollSteps:function(){return this.panel?this.panel.pager&&this.panel.pager.async===!0?this.panel.indexToCell(this.panel.pager.total-1)[0]:this.panel.rows-1:Math.ceil(this.scrollHeight/this.options.scrollLength)},hide:function(){this.$track.hide(),this.fire("hide",this)},show:function(){this.$track.show(),this.fire("show",this)},scroll:function(a){var b=this.perContent*a,c=this.perScroller*a;c=c>this.scrollTrackHeight?this.scrollTrackHeight:c,b=b>this.scrollHeight?this.scrollHeight:b,this.$handle.css("top",c+"px"),this.panel||this.$content.css("top",-b+"px"),this.currentStep=a,this.fire("scroll",c,b,a)},next:function(){this.currentStep<this.scrollSteps&&this.scroll(++this.currentStep)},prev:function(){this.currentStep>0&&this.scroll(--this.currentStep)},events:function(){if(this.panel){var a=this,b=a.panel.indexToCell(this.panel.pager.pageSize-1)[0]+1;this.panel.on("focus",function(c){if(a.panel.pager&&a.panel.pager.async===!0){var d=a.panel.pager.pageIndex*b+a.panel.indexToCell(c)[0];a.scroll(d)}else a.scroll(a.panel.indexToCell(c)[0])}),this.panel.on("reset",function(){a.reset(),a.panel.pager&&a.panel.pager.async===!1&&a.$content.css("top",-(a.viewHeight*a.panel.pager.pageIndex)+"px")}),this.panel.pager&&this.panel.pager.async===!1&&this.panel.pager.on("change",function(b){a.$content.css("top",-(a.viewHeight*b)+"px")})}else this.pageCount=Math.ceil(this.contentHeight/this.viewHeight),this.pageSize=Math.ceil(this.viewHeight/this.options.scrollLength),this.pageIndex=0,this.registerEvent(g.onMove(function(a){switch(a){case"up":this.prev();break;case"down":this.next()}},this)),this.registerEvent(g.onPress(function(a){switch(a.which){case d.PAGE_DOWN:this.pageIndex<this.pageCount-1?++this.pageIndex:this.pageCount-1,this.scroll(this.pageIndex*this.pageSize);break;case d.PAGE_UP:this.pageIndex>0?--this.pageIndex:0,this.scroll(this.pageIndex*this.pageSize)}},this))}},f),a.ScrollBar=b}(TVUI),function(a){var b,c=a.Class,d=a.Base,e=a.Util,f=a.Panel,g=a.Lang,h=a.$;b=c.create({init:function(a){var b=this.options=h.extend({title:"",content:"",width:300,height:null,theme:"",btns:{},timeout:null,page:null,btnFocusClass:"focus",mask:!0,auto:!0},a||{});this.clientWidth=document.documentElement.clientWidth||document.body.clientWidth,this.clientHeight=document.documentElement.clientHeight||document.body.clientHeight,this.btns=b.btns,this.page=b.page,this.render(),this.setPanel(),b.auto?this.show():this.hide(),b.timeout&&e.timeout(function(){this.destroy()},b.timeout,this)},render:function(){var a,c=this.options,d=[],f='<div class="dialog-inner"><div class="dialog-title">{$title}</div><div class="dialog-content">{$content}</div><div class="dialog-btns">{$btns}</div></div>',g='<div class="dialog-btn {$theme}"><span>{$name}</span></div>';h.each(c.btns,function(a,b){d.push(e.tpl(g,{name:b.text,theme:b.theme||""}))}),a=e.tpl(f,{title:c.title,content:c.content,btns:d.join("")}),c.mask&&(this.mask=h("<div>"),this.mask.attr("class","dialog-mask"),h(document.body).append(this.mask)),this.el=h("<div>").html(a).attr("class"," dialog "+c.theme),c.height&&this.el.height(parseInt(c.height)+"px"),h(document.body).append(this.el);var i=(this.clientWidth-c.width)/2,j=(this.clientHeight-(c.height||this.el.height()))/2;this.el.css({left:i+"px",top:j+"px",position:"absolute",width:parseInt(c.width)+"px","z-index":++b.zIndex})},setPanel:function(){var a=this.el.find(".dialog-btn"),b=this;this.panel=new f({cols:a.length,data:a}),this.panel.on("select",function(a){b.btns[a].handler&&b.btns[a].handler(b)})},show:function(){this.page&&this.page.unActive(),this.mask&&this.mask.show(),this.el.show(),this.fire("show",this)},hide:function(){this.page&&this.page.active(),this.mask&&this.mask.hide(),this.el.hide(),this.fire("hide",this)},destroy:function(){this.parent.prototype.destroy.apply(this,arguments),this.panel.destroy(),this.el.remove(),this.mask&&this.mask.remove(),this.page&&this.page.active()}},d),b.alert=function(a,c,d,e){var f=new b({content:c,title:g[a.lang].T_15,width:400,btns:[{text:g[a.lang].T_1,handler:function(a){d&&d(a),d=null,a.destroy()}}],theme:"dialog-alert",page:a,timeout:e||null});return f.on("destroy",function(){d&&d(f)}),f},b.confirm=function(a,c,d,e){return new b({content:c,title:"",width:400,btns:[{text:g[a.lang].T_1,handler:function(a){d&&d(a),a.destroy()},theme:"dialog-btn-ok"},{text:g[a.lang].T_2,handler:function(a){e&&e(a),a.destroy()},theme:"dialog-btn-cancel"}],theme:"dialog-confirm",page:a})},b.tip=function(a,c){return new b({content:a,title:"",theme:"dialog-tip",timeout:c||5e3})},b.zIndex=100,a.Dialog=b}(TVUI),function(a){var b,c=a.Key,d=a.Lang,e=a.API,f=a.$,g=a.Event,h=(a.Log,a.Util);b=a.Class.create({init:function(a){var b=this.options=f.extend({type:"video",fullScreen:!1,width:400,height:300,left:0,top:0,page:null,transparent:!0,pauseMode:1,autoDestroy:!0},a||{});this.pace=1,this.type=b.type,this.page=b.page,this._disableCount=0,this.playingIndex=0,this.isPlaying=!1,this.fileList=[],this.pauseMode=b.pauseMode,this._volumn=this._initVolumn(),this._createDom(b.fullScreen,b.left,b.top,b.width,b.height),this.createPlayer(),this._event()},_initVolumn:function(){var a=e.DataAccess.info("VodApp","QAMName4");return a?e.DataAccess.volume(a):(a=e.DataAccess.volume(16),e.DataAccess.info("VodApp","QAMName4",a)),this.fire("initVolume",a),parseInt(a,10)},_createDom:function(a,b,c,d,e){var g=f("<div>");a&&(d=document.documentElement.clientWidth||document.body.clientWidth,e=document.documentElement.clientHeight||document.body.clientHeight,b=c=0),g.css({position:"absolute",width:d+"px",height:e+"px",top:c+"px",left:b+"px",color:"#fff"}),this.el=g,this.options.transparent?f(document.body).append(g).css({background:"transparent"}):f(document.body).append(g)},_event:function(){var a=this;this.page&&(this.options.autoDestroy&&this.page.on("unload",this.proxy(this.destroy)),this.page.on("active unActive",function(){a._active=this._active})),this.registerEvent(g.onPress(function(b){if(a._active)switch(parseInt(b.which)){case c.STOP:a.stop();break;case c.PAUSE:a.pause();break;case c.PLAY:a.play();break;case c.VOLUME_MUTE:a.mute();break;case c.FUN9:a.fastBackward();break;case c.FUN10:a.fastForward();break;case c.FUN20:var d=a.aspect();6==d&&(d=0),d=d>6?0:++d,a.aspect(d)}})),this.registerEvent(g.onKey(c.VOLUME_UP,function(){a._active&&a.volume(1)})),this.registerEvent(g.onKey(c.VOLUME_DOWN,function(){a._active&&a.volume(-1)})),this.registerEvent(g.onSystem(function(b){if(a._active){var c=parseInt(b.which,10),f=b.modifiers,g=a.page,h=e.SysSetting.getEventInfo(f).split(","),i=Math.floor(h[1]);switch(c){case 10031:var j=DVB.currentTS;a.fire("locked",j);break;case 10032:a.fire("error",d[g.lang].T_7,c);break;case 10901:a.fire("playEnd"),a.playNext();break;case 10905:break;case 10921:a.fire("error",d[g.lang].T_8,c);break;case 10903:switch(i){case 754:a.fire("error",d[g.lang].T_9,c,i);break;default:200!=i&&a.fire("error",d[g.lang].T_10,c,i)}break;case 10913:a._disableCount++;break;case 10906:a._disableCount=0;break;case 10907:case 10908:switch(i){case 200:break;case 403:a.fire("error",d[g.lang].T_11,c,i);break;case 754:a.fire("error",d[g.lang].T_9,c,i);break;default:i>=400&&778>=i&&455!=i&&a.fire("error",d[g.lang].T_10,c,i)}break;case 10910:a._disableCount=0;break;case 10909:switch(i){case 403:a.fire("error",d[g.lang].T_11,c,i);break;case 2101:a.fire("rtspEnd",c,i);
break;case 2104:a.fire("rtspStart",c,i);break;case 5402:a.fire("error",d[g.lang].T_12,c,i)}break;case 10915:a._disableCount++;break;case 10912:a.fire("error",d[g.lang].T_13,c);break;case 10904:200!=i&&a.fire("error",d[g.lang].T_14,c,i);break;case 10914:a._disableCount++,a._disableCount>20&&a.fire("error",d[g.lang].T_14,c);break;case 10917:a._disableCount++,a._disableCount>20&&a.fire("error",d[g.lang].T_14,c);break;case 11702:break;default:c>=11301&&11328>=c&&a.fire("error",h[0],c),c>=11501&&11585>=c&&a.fire("error",h[0],c)}}}))},setPosition:function(a,b,c,d,e){if("video"==this.type){var f=[];f.push(Number(a)),f.push(b),f.push(c),f.push(d),f.push(e),this.player.position=f.join(",")}else this.player.position="0,0,0,1,1"},createPlayer:function(){var a=this.options;if(window.MediaPlayer)this.player=new MediaPlayer,this.instanceId=e.SysSetting.env("sw_player_id"),this.instanceId?this.player.bindPlayerInstance(parseInt(this.instanceId)):(this.instanceId=this.player.createPlayerInstance(a.type,"video"==a.type?2:0),e.SysSetting.env("sw_player_id",String(this.instanceId))),this.setPosition(a.fullScreen,a.left,a.top,a.width,a.height);else{var b="isDVBVideo|setPace|setPosition|DVBSrc|VODSrc|UDPSrc|src|play|pause|refresh|destroy|stop|mute|getLength|point|aspect|mode|fastForward|slowForward|fastBackward|slowBackward|volumnUp|volumnDown|active|multiSrc|next".split("|"),c=this;f.each(b,function(a,b){c[b]=function(){var a=h.makeArray(arguments);return a.unshift("player."+b+"("),a.push(")"),h.log.apply(h,a),c.el.html(a.join("")),!0}}),this.el.css({background:"#000"})}},destroy:function(a){return this.parent.prototype.destroy.apply(this,arguments),e.SysSetting.env("sw_player_id",null),e.DataAccess.info("MediaSetting","PauseMode","number"==f.type(a)?a:this.pauseMode),this.player.releasePlayerInstance()},src:function(a){var b=/(file:\/\/|http:\/\/|delivery:\/\/|rtsp:\/\/|udp:\/\/)/i;if(!b.test(a))throw new Error("文件地址不正确");this.fileList=[],this.fileList.push(a),this.isPlaying=!1},multiSrc:function(a){this.fileList=a},DVBSrc:function(a){var b={Frequency:"",SymbolRate:0,Modulation:0,ProgramNumber:"",VideoPID:0,AudioPID:0},c=f.extend(b,a),d=[];if(!c.Frequency||!c.ProgramNumber)throw new Error("缺少参数");d.push(c.Frequency),d.push(c.SymbolRate),d.push(c.Modulation),d.push(c.ProgramNumber),d.push(c.VideoPID),d.push(c.AudioPID);var e="delivery://"+d.join(".");this.src(e)},VODSrc:function(a){var b={path:"",port:"",token:"",serverId:""},c=f.extend(b,a);if(!(c.path&&c.port&&c.token&&c.serverId))throw new Error("缺少参数");var d="rtsp://"+c.path+":"+c.port+"/;purchaseToken="+c.token+";serverId="+c.serverId;this.src(d)},UDPSrc:function(a){var b={address:"0.0.0.0",port:"",ProgramNumber:"",VideoPID:0,AudioPID:0},c=f.extend(b,a),d=[];if(!c.ProgramNumber)throw new Error("缺少参数");d.push(c.address),d.push(c.port),d.push(c.ProgramNumber),d.push(c.VideoPID),d.push(c.AudioPID);var e="udp://"+d.join(":");this.src(e)},play:function(){if(this.isPlaying){this.pace=1,this.player.pace=this.pace;this.fileList[this.playingIndex];this.player.refresh(),this.fire("play",1)}else{this.player.source=this.fileList[this.playingIndex],this.isPlaying=!0,this.pace=1,this.player.pace=this.pace;var a=this.player.play();this.fire("play",a)}},playNext:function(){var a=this.fileList.length,b=this.playingIndex;a-1>b?(++this.playingIndex,this.stop(),this.play()):this.fire("allEnd",this.player)},pause:function(a){return this.fire("pause"),this.player.pause("undefined"==typeof a?this.pauseMode:a)},stop:function(a){return this.isPlaying=!1,this.fire("stop"),this.player.pause("undefined"==typeof a?this.pauseMode:a)},volume:function(a){switch(a){case 1:this._volumn=this._volumn>=32?32:++this._volumn;break;case-1:this._volumn=this._volumn<=0?0:--this._volumn;break;default:this._volumn=a}e.DataAccess.volumn(this._volumn),this.fire("volume",this._volumn)},mute:function(){var a=!!this.player.getMute();a?this.player.audioUnmute():this.player.audioMute(),this.fire("mute",!a)},getLength:function(a){var b=this.player.getMediaDuration(),c=b.split(":");if(a)return 3==c.length?3600*parseInt(c[0])+60*parseInt(c[1])+parseInt(c[2]):0;var d=f.map(c,function(a){return h.pad(a,2)});return d.join(":")},getPlayTime:function(){var a=this.point(),b=parseInt(a/3600),c=parseInt((a-3600*b)/60),d=a-3600*b-60*c,e=[b,c,d],g=f.map(e,function(a){return h.pad(a,2)});return g.join(":")},point:function(a){return void 0===a||"number"!=f.type(parseInt(a))?this.player.currentPoint:void(this.player.point=a)},refresh:function(){this.player.refresh()},aspect:function(a){return a?(this.player.videoAspect=a,void this.fire("aspect",a)):this.player.videoAspect},mode:function(a){return a?void(this.player.videoMode=a):this.player.videoMode},setPace:function(a){this.player.pace=this.pace=a,this.refresh(),a>1?this.fire("fastForward",this.pace):-1>a&&this.fire("fastBackward",this.pace),this.fire("pace",this.pace)},fastForward:function(){1==this.pace?this.pace=12:12==this.pace?this.pace=32:32==this.pace?this.pace=1:this.pace=12,this.player.pace=this.pace,this.refresh(),this.fire("fastForward",this.pace)},fastBackward:function(){1==this.pace?this.pace=-12:-12==this.pace?this.pace=-32:-32==this.pace?this.pace=1:this.pace=-12,this.player.pace=this.pace,this.refresh(),this.fire("fastBackward",this.pace)},isDVBVideo:function(){var a=this.player.eleStreams||[];if(1==a.length&&4==a[0].eleStreamType)return!1;for(var b=0,c=a.length;c>b;b++)if(2==a[b].eleStreamType||4==a[b].eleStreamType)return!0;return!1}},a.Base),a.Player=b}(TVUI),function(a,b){var c=b.Class.create({init:function(b){var c=this.options=a.extend({view:document.body,el:document.body,placeholder:"theme/common/img/space.gif",threshold:100,replaceSrc:!1,async:!1,content:"",scrollBar:null},b||{});this.el=a(c.el),this.view=a(c.view),this.placeholder=c.placeholder,this.threshold=c.threshold,this.content=c.content,this.async=c.async,this.replaceSrc=c.replaceSrc,this.scrollBar=c.scrollBar,this.parentOffset=this.view.offset(),this.render(),this.imgs=this.el.find("img"),this.events(),this.load()},render:function(){if(this.content&&this.async){if(this.replaceSrc){var a=/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,b=/src=['"]([^'"]+)['"]/gi,c=this.placeholder;this.content=this.content.replace(a,function(a){return a.replace(b,function(a){return"data-"+a+' src="'+c+'"'})})}this.el.html(this.content)}},events:function(){var a=this;this.scrollBar&&(this.scrollBar.on("scroll",function(){a.load()}),this.imgs.each(function(b,c){c.onload=function(){a.scrollBar.reset()}}))},load:function(){var b=this,c=this.parentOffset,d=c.top+c.height;this.imgs.each(function(c,e){if(-1===e.className.indexOf("J_load")){var f=a(e),g=f.offset(),h=f.attr("data-src");g.top-b.threshold<d&&f.attr("src",h).addClass("J_load")}})}},b.Base);b.LazyLoad=c}(Zepto,TVUI),function(a){var b,c=a.Util,d=a.Event,e=a.$,f=!1,g=function(){var a=c.makeArray(arguments),d=[];e.each(a,function(a,b){if("object"==typeof b)try{d.push(JSON.stringify(b))}catch(c){d.push(b)}else d.push(b)});var g=e("<div>").css({"border-bottom":"1px dashed #666",padding:"10px"});f=!0,g.html(d.join(" | ")),b&&(b.show(),b.append(g)),c.log.apply(c,arguments)};d.onKey(318,function(){a.debug&&(f=!f,f?b.show():b.hide())}),d.onKey(73,function(){a.debug&&b.empty()}),window.onerror=function(){},a.Log=g,e(function(){a.debug&&(b=e("#debugbox"),0===b.length&&(b=e("<div>").attr("id","debugbox"),b.css({position:"absolute","z-index":"9999",width:"90%",height:"90%",background:"#fff",color:"#000",left:"50px",top:"20px",border:"5px solid red","font-size":"18px","word-break":"break-all",display:"none"}),e("body").append(b)))})}(TVUI);